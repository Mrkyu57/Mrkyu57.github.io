---
layout: default
---

<div class="row">
  <div class="col-12 text-center my-5">
    <h1 class="dynamic-title" style="font-weight: 800; letter-spacing: -1px;">{{ page.title | upcase }}</h1>
    <p class="text-muted">{{ page.title }} 하위 카테고리를 탐색하세요.</p>
  </div>

  <div class="col-12 mb-5">
    <div class="row g-4 justify-content-center">
      {% assign current_cat = page.title %}
      {% assign sub_cats = "" | split: "" %}

      {% comment %} 
        모든 포스트를 검사해서 '현재 대분류' 다음에 오는 '소분류' 이름을 수집합니다.
      {% endcomment %}
      {% for post in site.posts %}
        {% for cat in post.categories %}
          {% if cat == current_cat %}
            {% assign next_idx = forloop.index %}
            {% if post.categories[next_idx] %}
              {% assign sub_cats = sub_cats | push: post.categories[next_idx] %}
            {% endif %}
          {% endif %}
        {% endfor %}
      {% endfor %}
      
      {% assign sub_cats = sub_cats | uniq | sort %}

      {% for sub in sub_cats %}
        <div class="col-6 col-md-4 col-lg-3">
          <a href="{{ '/categories/' | relative_url }}{{ sub | slugify }}/" class="card h-100 sub-box text-decoration-none">
            <div class="card-body d-flex flex-column align-items-center justify-content-center py-4">
              <div class="icon-circle mb-3" style="width: 50px; height: 50px; background: var(--main-border-color);">
                <i class="fas fa-folder text-info"></i>
              </div>
              <h3 class="card-title h6 mb-1" style="color: var(--heading-color); font-weight: 700;">{{ sub }}</h3>
              <span class="badge rounded-pill bg-light text-dark border" style="font-size: 0.7rem;">
                {{ site.categories[sub] | size }} Posts
              </span>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  </div>

  <div class="col-12">
    <hr class="my-5" style="opacity: 0.1;">
    <h4 class="mb-4" style="font-weight: 700;">전체 포스트</h4>
    <div id="post-list">
      {% for post in page.posts %}
        <article class="card-wrapper card mb-3" style="background: var(--card-bg) !important; border: 1px solid var(--main-border-color) !important;">
          <a href="{{ post.url | relative_url }}" class="post-preview p-3 text-decoration-none">
            <h2 class="card-title h5 my-0" style="color: var(--heading-color);">{{ post.title }}</h2>
            <div class="post-meta text-muted small mt-2">
              <i class="far fa-calendar-alt me-1"></i> {{ post.date | date: "%Y-%m-%d" }}
            </div>
          </a>
        </article>
      {% endfor %}
    </div>
  </div>
</div>

<style>
  /* 기본 article 흰 박스 제거 */
  #core-wrapper > article {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }

  .sub-box {
    border: 1px solid var(--main-border-color);
    background-color: var(--card-bg) !important;
    border-radius: 15px;
    transition: 0.3s;
  }
  .sub-box:hover {
    transform: translateY(-5px);
    border-color: var(--link-color);
  }
  .icon-circle {
    display: flex; align-items: center; justify-content: center; border-radius: 50%;
  }
</style>